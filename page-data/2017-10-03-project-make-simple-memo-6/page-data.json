{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/2017-10-03-project-make-simple-memo-6/",
    "result": {"data":{"site":{"siteMetadata":{"title":"YH.K Logs"}},"markdownRemark":{"id":"a9d2a455-c0d4-58bf-8590-60400b2e3c71","excerpt":"이번시간에는 아이오닉에서 제공해주는 무한 스크롤(infinite scroll)을 적용해볼거에요!! 테스트 환경 작성 테스트케이스 작성을 위해서 아래 코드를 메모리스트 페이지의 ngOnInit 생명주기 메서드의 아래의 코드를 작성한 후 새로고침해주세요. 500…","html":"<p>이번시간에는 아이오닉에서 제공해주는 무한 스크롤(infinite scroll)을 적용해볼거에요!!</p>\n<!-- more -->\n<h3>테스트 환경 작성</h3>\n<p>테스트케이스 작성을 위해서 아래 코드를 <strong>메모리스트</strong> 페이지의 <strong>ngOnInit</strong> 생명주기 메서드의 아래의 코드를 작성한 후 새로고침해주세요.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>memoManager<span class=\"token punctuation\">.</span><span class=\"token function\">createMemo</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">제목</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">내용</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>i<span class=\"token punctuation\">.</span>toString<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>5000개가 넘어가면 메모리스트 페이지가 많이 느려지는걸 볼 수 있습니다.\n텍스트만 있어도 느린데 이미지가 있는 페이지라면 어느정도일지 짐작이 되시겠죠?</p>\n<h3>코드 작성</h3>\n<div class=\"gatsby-highlight\" data-language=\"htmlsrc/pages/memo-list/memo-list/html\"><pre class=\"language-htmlsrc/pages/memo-list/memo-list/html\"><code class=\"language-htmlsrc/pages/memo-list/memo-list/html\">&lt;ion-header&gt;\n  &lt;ion-navbar color=&quot;primary&quot;&gt;\n    &lt;ion-searchbar [(ngModel)]=&quot;searchKeyword&quot;&gt;&lt;/ion-searchbar&gt;\n    &lt;ion-buttons end&gt;\n      &lt;button ion-button icon-only (click)=&quot;onClickMoreOption()&quot;&gt;\n        &lt;ion-icon name=&quot;more&quot;&gt;\n        &lt;/ion-icon&gt;\n      &lt;/button&gt;\n    &lt;/ion-buttons&gt;\n  &lt;/ion-navbar&gt;\n&lt;/ion-header&gt;\n&lt;ion-content&gt;\n  &lt;ng-template ngFor let-memo [ngForOf]=&quot;memoList | async | slice : 0 : viewCount&quot; let-i=&quot;index&quot;&gt;\n    &lt;ion-card (click)=&quot;onClickViewMemoDetail(memo)&quot; *ngIf=&quot;filterMemo(memo)&quot;&gt;\n      &lt;ion-card-header&gt;\n        {{ memo.title }}\n      &lt;/ion-card-header&gt;\n      &lt;ion-card-content&gt;\n        {{ memo.contents }}\n      &lt;/ion-card-content&gt;\n    &lt;/ion-card&gt;\n  &lt;/ng-template&gt;\n  &lt;ion-infinite-scroll (ionInfinite)=&quot;doInfinite($event)&quot;&gt;\n    &lt;ion-infinite-scroll-content\n      loadingSpinner=&quot;bubbles&quot;\n      loadingText=&quot;please waite...&quot;\n    &gt;&lt;/ion-infinite-scroll-content&gt;\n  &lt;/ion-infinite-scroll&gt;\n  &lt;ion-fab right bottom&gt;\n    &lt;button ion-fab icon-only (click)=&quot;onClickCreateMemo()&quot;&gt;\n      &lt;ion-icon name=&quot;add&quot; big&gt;&lt;/ion-icon&gt;\n    &lt;/button&gt;\n  &lt;/ion-fab&gt;\n&lt;/ion-content&gt;</code></pre></div>\n<p>전체 코드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ng-template</span> <span class=\"token attr-name\">ngFor</span> <span class=\"token attr-name\">let-memo</span> <span class=\"token attr-name\">[ngForOf]</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>memoList | async | slice : 0 : viewCount<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">let-i</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>index<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  ...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ng-template</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ion-infinite-scroll</span> <span class=\"token attr-name\">(ionInfinite)</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>doInfinite($event)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  ...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ion-infinite-scroll</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><strong>ionInfinite</strong>에 주목하세요. ion-infinite-scroll 태그가 화면상에 보일경우 등록해놓은 <strong>doInfinite</strong> 함수를 호출합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescriptsrc/pages/memo-list/memo-list/ts\"><pre class=\"language-typescriptsrc/pages/memo-list/memo-list/ts\"><code class=\"language-typescriptsrc/pages/memo-list/memo-list/ts\">import { AuthManagerProvider } from &#39;./../../providers/auth-manager/auth-manager&#39;;\nimport { FirebaseListObservable } from &#39;angularfire2/database&#39;;\nimport { Memo } from &#39;./../../models/memo/memo.interface&#39;;\nimport { Component, OnInit } from &#39;@angular/core&#39;;\nimport { IonicPage, NavController, NavParams, LoadingController, ActionSheetController } from &#39;ionic-angular&#39;;\n\nimport { MemoCreatePage } from &#39;./../memo-create/memo-create&#39;;\nimport { MemoDetailPage } from &#39;./../memo-detail/memo-detail&#39;;\n\nimport { MemoManagerProvider } from &#39;./../../providers/memo-manager/memo-manager&#39;;\n@IonicPage()\n\n@Component({\n  selector: &#39;page-memo-list&#39;,\n  templateUrl: &#39;memo-list.html&#39;,\n})\n\nexport class MemoListPage {\n\n  searchKeyword: string = &#39;&#39;;\n  viewCount: number = 10;\n  memoList: FirebaseListObservable&lt;Memo&gt;;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public loadingCtrl: LoadingController,\n    public actionSheetCtrl: ActionSheetController,\n    public authManager: AuthManagerProvider,\n    public memoManager: MemoManagerProvider) {\n  }\n \n  ngOnInit() {\n    this.memoList = this.memoManager.getMemoList();\n  }\n\n  doInfinite(infiniteScroll: any) {\n    window.setTimeout(() =&gt; {\n      this.viewCount += this.viewCount;\n      infiniteScroll.complete();\n    }, 500);\n  }\n\n  filterMemo(memo: Memo): boolean {\n    return memo.title.includes(this.searchKeyword) || memo.title.includes(this.searchKeyword);\n  }\n\n  onClickViewMemoDetail(memo: Memo) {\n    this.navCtrl.push(MemoDetailPage, { memo: memo });\n  }\n  \n  onClickCreateMemo() {\n    this.navCtrl.push(MemoCreatePage);\n  }\n\n  onClickMoreOption() {\n    const actionSheet = this.getMoreOptionActionSheet();\n    actionSheet.present();\n  }\n\n  getMoreOptionActionSheet() {\n    return this.actionSheetCtrl.create({\n      buttons: [\n        {\n          text: &#39;Logout&#39;,\n          role: &#39;destructive&#39;,\n          handler: () =&gt; {\n            this.authManager.logoutUser();\n          }\n        }, {\n          text: &#39;Cancel&#39;,\n          role: &#39;cancel&#39;\n        }\n      ]\n    });\n  }\n}</code></pre></div>\n<p>별거없죠? slice할 viewCount를 증가시켜주고, infiniteScroll 이벤트를 종료합니다.</p>\n<hr>\n<p>참고 링크</p>\n<ul>\n<li><a href=\"https://github.com/ddalpange/simple-memo\">해당 포스트에 작성된 모든 코드는 여기에 있습니다!</a></li>\n<li><a href=\"https://memo-28314.firebaseapp.com\">해당 프로젝트는 여기서 볼 수 있습니다 !!</a></li>\n</ul>","frontmatter":{"title":"간단한 메모장 만들기 6 - 무한 스크롤 적용","date":"October 03, 2017","description":null}},"previous":{"fields":{"slug":"/2017-10-03-project-make-simple-memo-5/"},"frontmatter":{"title":"간단한 메모장 만들기 5 - CRUD"}},"next":{"fields":{"slug":"/2017-10-03-make-new-blog/"},"frontmatter":{"title":"헥소 블로그 삽질"}}},"pageContext":{"id":"a9d2a455-c0d4-58bf-8590-60400b2e3c71","previousPostId":"cab051e8-e0ff-57c9-a3b8-ad0553d3278b","nextPostId":"e3d0554d-9f32-561b-9084-3bc9f92180c6"}},
    "staticQueryHashes": ["230163734","2841359383"]}